<div class="fitmate-container">
  <div class="fitmate-search">
    <div class="col-sm-8 my-3">
      <%= form_with url: events_path, method: :get, class: "d-flex" do %>
      <%= text_field_tag :query,
      params[:query],
      class: "form-control",
      placeholder: "üîç Which sport ? Which localisation ?"
      %>
      <%= submit_tag "Search", name: "", class: "btn-submit" %>
      <% end %>
    </div>
  </div>
  <div id='map' style='width: 100%; height: 844px;'>
  </div>
  <script>
  mapboxgl.accessToken = "<%= ENV['MAPBOX_API_FIT_MATE'] %>";
  const map = new mapboxgl.Map({
      container: 'map', // container ID
      style: 'mapbox://styles/mapbox/streets-v12', // style URL
      center: [-1.553621, 47.218371], // starting position [lng, lat]
      zoom: 12, // starting zoom
  });
  const stadebeaujoire = new mapboxgl.Marker()
  .setLngLat([-1.524675, 47.256023])
  .addTo(map);

  // Cr√©er un √©l√©ment DOM pour le texte
  const event_title = document.createElement('div');
  event_title.textContent = 'Texte AL √† afficher sous le marqueur';
  console.log("Hello Le Wagon");
  event_title.className = 'marker-text'; // Ajouter une classe pour les styles CSS

// Cr√©er une superposition (popup) avec le texte
  const popup = new mapboxgl.Popup()
  .setDOMContent(event_title);

// Associer la superposition au marqueur
  stadebeaujoire.setPopup(popup);
  </script>

  <div
    data-controller="map"
    data-map-markers-value="<%= @markers.to_json %>"
    data-map-api-key-value="<%= ENV['MAPBOX_API_FIT_MATE'] %>">
  </div>



</div>
